"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7658],{7658:(H,h,m)=>{m.r(h),m.d(h,{AccessPageModule:()=>W});var d=m(177),a=m(9417),v=m(4488),f=m(294),M=m(5779),e=m(4438),F=m(8010),k=m(5898),C=m(6831),c=m(2102),g=m(9631),u=m(3955);function I(t,s){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"errors.valid")))}function w(t,s){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"errors.valid")))}let $=(()=>{var t;class s{constructor(o){this.formBuilder=o,this.onsubmit=new e.bkB,this.form=this.formBuilder.group({email:["",[a.k0.required]],password:["",[a.k0.required]]})}ngOnInit(){}onSub(){var o;this.onsubmit.emit(null===(o=this.form)||void 0===o?void 0:o.value),this.form.reset()}}return(t=s).\u0275fac=function(o){return new(o||t)(e.rXU(a.ok))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-login-form"]],outputs:{onsubmit:"onsubmit"},decls:17,vars:13,consts:[[3,"ngSubmit","keyup.enter","formGroup"],["appearance","outline"],["type","text","placeholder","gmail@gmail.com","matInput","","formControlName","email"],[4,"ngIf"],["type","password","matInput","","formControlName","password"],[3,"disabled"]],template:function(o,r){1&o&&(e.j41(0,"div")(1,"form",0),e.bIt("ngSubmit",function(){return r.onSub()})("keyup.enter",function(){return r.onSub()}),e.j41(2,"mat-form-field",1)(3,"mat-label"),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.nrm(6,"input",2),e.DNE(7,I,3,3,"mat-error",3),e.k0s(),e.j41(8,"mat-form-field",1)(9,"mat-label"),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.nrm(12,"input",4),e.DNE(13,w,3,3,"mat-error",3),e.k0s(),e.j41(14,"button",5),e.EFF(15),e.nI1(16,"translate"),e.k0s()()()),2&o&&(e.R7$(),e.Y8G("formGroup",r.form),e.R7$(3),e.JRh(e.bMT(5,7,"forms.email")),e.R7$(3),e.Y8G("ngIf",r.form.controls.email.invalid),e.R7$(3),e.JRh(e.bMT(11,9,"forms.password")),e.R7$(3),e.Y8G("ngIf",r.form.controls.password.invalid),e.R7$(),e.Y8G("disabled",r.form.invalid),e.R7$(),e.JRh(e.bMT(16,11,"forms.logIn")))},dependencies:[a.qT,a.me,a.BC,a.cb,a.j4,a.JD,d.bT,c.rl,c.nJ,c.TL,g.fg,u.D9],styles:["div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:350px;margin-bottom:2rem}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1rem;border:none;border-radius:4px;background-color:#0f212d;color:#fff;font-weight:700;cursor:pointer}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#1b3e56}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;color:#777;cursor:not-allowed}"]}),s})();class T{static email(s=""){return n=>{var o;let r="";return r=n instanceof a.MJ?null==n?void 0:n.value:null===(o=n.get(s))||void 0===o?void 0:o.value,r&&!r.match(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)?{email:!0}:null}}}class p{static passwordProto(s=""){return n=>{var o;let r="";return r=n instanceof a.MJ?null==n?void 0:n.value:null===(o=n.get(s))||void 0===o?void 0:o.value,r&&!r.match(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{8,}$/)?{passwordProto:!0}:null}}static passwordMatch(s,n){return o=>{var r,i;if((null===(r=o.get(s))||void 0===r?void 0:r.value)!=(null===(i=o.get(n))||void 0===i?void 0:i.value)){let l=null==o?void 0:o.errors;return l&&"object"==typeof l?Object.assign(l,{passwordMatch:!0}):l={passwordMatch:!0},l}{let l=null==o?void 0:o.errors;return l&&"object"==typeof l&&l.passwordMatch&&delete l.passwordMatch,o.errors}}}}var R=m(8834),P=m(9213);function O(t,s){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"errors.valid")," "))}function y(t,s){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"errors.valid")," "))}function j(t,s){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"errors.valid")," "))}function E(t,s){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"errors.emailError")," "))}function A(t,s){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"errors.valid")," "))}function G(t,s){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"errors.valid")," "))}function S(t,s){1&t&&(e.j41(0,"mat-error"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"errors.repeatError")," "))}let J=(()=>{var t;class s{constructor(o){this.formBuilder=o,this.hide=!0,this.onsubmit=new e.bkB,this.form=this.formBuilder.group({name:["",[a.k0.required]],surname:["",[a.k0.required]],email:["",[a.k0.required,T.email()]],username:["",[a.k0.required]],password:["",[a.k0.required,p.passwordProto()]],repPassword:["",[a.k0.required,p.passwordProto()]]},{validators:[p.passwordMatch("password","repPassword")]})}ngOnInit(){}onSub(){var o;this.onsubmit.emit(null===(o=this.form)||void 0===o?void 0:o.value),this.form.reset({name:"",surname:"",email:"",username:"",password:"",repPassword:""})}}return(t=s).\u0275fac=function(o){return new(o||t)(e.rXU(a.ok))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-register-form"]],outputs:{onsubmit:"onsubmit"},decls:44,vars:35,consts:[[3,"ngSubmit","keyup.enter","formGroup"],["appearance","outline"],["matInput","","formControlName","name"],[4,"ngIf"],["matInput","","formControlName","surname"],["matInput","","type","email","formControlName","email"],["matInput","","formControlName","username"],["matInput","","formControlName","password",3,"type"],["matInput","","formControlName","repPassword",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],[1,"register--button",3,"disabled"]],template:function(o,r){1&o&&(e.j41(0,"form",0),e.bIt("ngSubmit",function(){return r.onSub()})("keyup.enter",function(){return r.onSub()}),e.j41(1,"mat-form-field",1)(2,"mat-label"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.nrm(5,"input",2),e.DNE(6,O,3,3,"mat-error",3),e.k0s(),e.j41(7,"mat-form-field",1)(8,"mat-label"),e.EFF(9),e.nI1(10,"translate"),e.k0s(),e.nrm(11,"input",4),e.DNE(12,y,3,3,"mat-error",3),e.k0s(),e.j41(13,"mat-form-field",1)(14,"mat-label"),e.EFF(15),e.nI1(16,"translate"),e.k0s(),e.nrm(17,"input",5),e.DNE(18,j,3,3,"mat-error",3)(19,E,3,3,"mat-error",3),e.k0s(),e.j41(20,"mat-form-field",1)(21,"mat-label"),e.EFF(22),e.nI1(23,"translate"),e.k0s(),e.nrm(24,"input",6),e.DNE(25,A,3,3,"mat-error",3),e.k0s(),e.j41(26,"mat-form-field",1)(27,"mat-label"),e.EFF(28),e.nI1(29,"translate"),e.k0s(),e.nrm(30,"input",7),e.DNE(31,G,3,3,"mat-error",3),e.k0s(),e.j41(32,"mat-form-field",1)(33,"mat-label"),e.EFF(34),e.nI1(35,"translate"),e.k0s(),e.nrm(36,"input",8),e.j41(37,"button",9),e.bIt("click",function(){return r.hide=!r.hide}),e.j41(38,"mat-icon"),e.EFF(39),e.k0s()(),e.DNE(40,S,3,3,"mat-error",3),e.k0s(),e.j41(41,"button",10),e.EFF(42),e.nI1(43,"translate"),e.k0s()()),2&o&&(e.Y8G("formGroup",r.form),e.R7$(3),e.JRh(e.bMT(4,21,"forms.name")),e.R7$(3),e.Y8G("ngIf",r.form.controls.name.touched&&r.form.controls.name.invalid),e.R7$(3),e.JRh(e.bMT(10,23,"forms.surname")),e.R7$(3),e.Y8G("ngIf",r.form.controls.surname.touched&&r.form.controls.surname.invalid),e.R7$(3),e.JRh(e.bMT(16,25,"forms.email")),e.R7$(3),e.Y8G("ngIf",r.form.controls.email.touched&&r.form.controls.email.hasError("required")),e.R7$(),e.Y8G("ngIf",r.form.controls.email.touched&&r.form.controls.email.hasError("email")),e.R7$(3),e.JRh(e.bMT(23,27,"forms.username")),e.R7$(3),e.Y8G("ngIf",r.form.controls.username.touched&&r.form.controls.username.invalid),e.R7$(3),e.JRh(e.bMT(29,29,"forms.password")),e.R7$(2),e.Y8G("type",r.hide?"password":"text"),e.R7$(),e.Y8G("ngIf",r.form.controls.password.touched&&r.form.controls.password.invalid),e.R7$(3),e.JRh(e.bMT(35,31,"forms.repPassword")),e.R7$(2),e.Y8G("type",r.hide?"password":"text"),e.R7$(),e.BMQ("aria-label","Hide password")("aria-pressed",r.hide),e.R7$(2),e.JRh(r.hide?"visibility_off":"visibility"),e.R7$(),e.Y8G("ngIf",(r.form.controls.password.touched||r.form.controls.repPassword.touched)&&r.form.hasError("passwordMatch")),e.R7$(),e.Y8G("disabled",r.form.invalid),e.R7$(),e.JRh(e.bMT(43,33,"forms.register")))},dependencies:[a.qT,a.me,a.BC,a.cb,a.j4,a.JD,d.bT,c.rl,c.nJ,c.TL,c.yw,g.fg,R.iY,P.An,u.D9],styles:["form[_ngcontent-%COMP%]{margin-top:8%;display:flex;flex-direction:column;gap:10px}form[_ngcontent-%COMP%]   .register--button[_ngcontent-%COMP%]{padding:1rem;border:none;border-radius:4px;background-color:#0f212d;color:#fff;font-weight:700;cursor:pointer}form[_ngcontent-%COMP%]   .register--button[_ngcontent-%COMP%]:hover{background-color:#1b3e56}form[_ngcontent-%COMP%]   .register--button[_ngcontent-%COMP%]:disabled{background-color:#ccc;color:#777;cursor:not-allowed}@media (max-width: 900px){div[_ngcontent-%COMP%]{margin-top:30%}.access__image[_ngcontent-%COMP%]{display:none}}"]}),s})();const Y=()=>({width:"96%",right:"1%",left:"1%"}),N=t=>({"600px":t});function B(t,s){if(1&t){const n=e.RV6();e.j41(0,"app-login-form",8),e.bIt("onsubmit",function(r){e.eBV(n);const i=e.XpG();return e.Njj(i.loginUser(r))}),e.k0s()}}function D(t,s){if(1&t){const n=e.RV6();e.j41(0,"app-register-form",8),e.bIt("onsubmit",function(r){e.eBV(n);const i=e.XpG();return e.Njj(i.registerUser(r))}),e.k0s()}}function x(t,s){if(1&t){const n=e.RV6();e.j41(0,"button",9),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.changeForm())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"access.toRegister")))}function L(t,s){if(1&t){const n=e.RV6();e.j41(0,"button",9),e.bIt("click",function(){e.eBV(n);const r=e.XpG();return e.Njj(r.changeForm())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"access.toLogin")))}const U=[{path:"",component:(()=>{var t;class s{constructor(o,r,i,_,b){this.auth=o,this.translate=r,this.messageService=i,this.route=_,this.router=b,this.login=!0,this.route.queryParams.subscribe(l=>{"notAdmin"===l.error&&this.showError("waitAdmin")})}ngOnInit(){}changeForm(){this.login=!this.login}registerUser(o){let r={...o};r.role="user",this.auth.register(r).subscribe({next:i=>{console.log("ALL WAS GOOD"),this.showSuccess("waitAdmin")},error:i=>{if(i.code)switch(i.code){case"auth/email-already-in-use":this.showError("emailUser");break;case"post-registration-error":this.showError("failRegister")}else this.showError("Unknown registration error")}})}loginUser(o){let r={...o};this.auth.login(r).subscribe({next:i=>{console.log("ALL WAS GOOD")},error:i=>{console.log("BAD",i),"auth/invalid-email"===i.code&&this.showError("loginError")}})}showSuccess(o){this.translate.get(`toast.${o}`).subscribe({next:i=>{this.messageService.add({key:"tl",severity:"info",detail:i}),this.login=!0}})}showError(o){this.translate.get(`toast.${o}`).subscribe({next:i=>{this.messageService.add({key:"tl",severity:"error",detail:i,life:6e3}),this.login=!0}})}}return(t=s).\u0275fac=function(o){return new(o||t)(e.rXU(F.u),e.rXU(k.d),e.rXU(M.bg),e.rXU(f.nX),e.rXU(f.Ix))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-access"]],features:[e.Jv_([M.bg])],decls:10,vars:9,consts:[[3,"fullscreen"],[1,"access"],[1,"access__forms"],["src","../../../assets/images/logo.png",1,"access__forms--logo"],[3,"onsubmit",4,"ngIf"],[3,"click",4,"ngIf"],[1,"access__image"],["position","top-left","key","tl",3,"breakpoints"],[3,"onsubmit"],[3,"click"]],template:function(o,r){1&o&&(e.j41(0,"ion-content",0)(1,"div",1)(2,"div",2),e.nrm(3,"img",3),e.DNE(4,B,1,0,"app-login-form",4)(5,D,1,0,"app-register-form",4)(6,x,3,3,"button",5)(7,L,3,3,"button",5),e.k0s(),e.nrm(8,"div",6),e.k0s(),e.nrm(9,"p-toast",7),e.k0s()),2&o&&(e.Y8G("fullscreen",!0),e.R7$(4),e.Y8G("ngIf",r.login),e.R7$(),e.Y8G("ngIf",!r.login),e.R7$(),e.Y8G("ngIf",r.login),e.R7$(),e.Y8G("ngIf",!r.login),e.R7$(2),e.Y8G("breakpoints",e.eq3(7,N,e.lJ4(6,Y))))},dependencies:[d.bT,v.W9,C.y8,$,J,u.D9],styles:["ion-content[_ngcontent-%COMP%]{margin-top:30%}.access[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:row}.access__forms[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:20px;gap:20px}.access__forms[_ngcontent-%COMP%]   .access__forms--logo[_ngcontent-%COMP%]{display:none;width:30%}.access__forms[_ngcontent-%COMP%]   app-login-form[_ngcontent-%COMP%], .access__forms[_ngcontent-%COMP%]   app-register-form[_ngcontent-%COMP%]{width:70%}.access__image[_ngcontent-%COMP%]{flex:1;width:99%;background-repeat:no-repeat;background-position:center;background-size:cover;background-image:url(vectorial-access.174cbe470ef509e5.webp)}.access[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;padding:.5rem;border:none;cursor:pointer}@media (max-width: 700px){.access[_ngcontent-%COMP%]{flex-direction:column}.access__forms[_ngcontent-%COMP%]   .access__forms--logo[_ngcontent-%COMP%]{display:block;width:30%}.access__forms[_ngcontent-%COMP%]   app-login-form[_ngcontent-%COMP%]{width:100%}.access__forms[_ngcontent-%COMP%]   app-register-form[_ngcontent-%COMP%]{margin-top:-5%;width:100%}.access__image[_ngcontent-%COMP%]{display:none}}"]}),s})()}];let V=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[f.iI.forChild(U),f.iI]}),s})();var X=m(1626),z=m(7704),Z=m(3887);let W=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[a.X1,d.MD,a.YN,v.bv,V,u.h.forChild({loader:{provide:u.Wr,useFactory:z.I,deps:[X.Qq]}}),c.RG,g.fS,R.Hl,P.m_,Z.G,C.MB]}),s})()}}]);